# koishi-plugin-my-menu

功能强大的菜单管理插件，支持文本和图片菜单显示。

## 功能特性

- 📋 **菜单管理**: 完整的菜单项增删改查功能
- 🖼️ **图片菜单**: 支持将菜单内容渲染为精美图片
- 📁 **分类管理**: 支持按分类组织菜单项
- 🔍 **搜索功能**: 快速搜索菜单项
- 📄 **分页显示**: 支持分页显示大量菜单项
- ⚙️ **权限控制**: 完整的权限管理系统

## 安装

```bash
# 在 Koishi 项目中使用
npm install koishi-plugin-my-menu
```

## 使用方法

### 基本命令

```bash
# 显示菜单
menu

# 以图片形式显示菜单
menu -i

# 显示指定分类的菜单
menu -c 娱乐

# 显示指定页码的菜单
menu -p 2

# 搜索菜单项
menu.search 签到

# 添加菜单项（需要权限）
menu.add 天气查询 #天气

# 列出所有菜单项
menu.list
```

### 管理命令（需要权限）

```bash
# 编辑菜单项
menu.edit <ID> -n 新名称 -d 新描述

# 删除菜单项
menu.delete <ID>

# 启用/禁用菜单项
menu.toggle <ID>

# 分类管理
menu.category.list
menu.category.change <ID> 新分类
```

## 配置说明

在 Koishi 控制台中配置插件：

- **默认分类名称**: 设置默认分类名称
- **启用分类显示**: 是否按分类分组显示菜单项
- **每页显示菜单项数量**: 控制分页大小
- **允许用户建议新菜单项**: 是否允许用户提交菜单项建议
- **菜单管理权限**: 设置管理权限名称
- **启用图片菜单**: 是否默认使用图片格式显示菜单
- **默认菜单项配置**: 预设的默认菜单项

## 图片菜单功能

插件支持将菜单内容渲染为精美的图片格式，提供更好的视觉体验：

### 使用方式

1. **命令行方式**: 使用 `menu -i` 命令以图片形式显示菜单
2. **配置方式**: 在插件配置中启用 `enableImageMenu` 选项，让所有菜单命令默认使用图片格式

### 图片特性

- 精美的渐变背景和卡片式布局
- 响应式设计，适配不同屏幕尺寸
- 支持中文字体显示
- 包含分页信息和统计信息

### 依赖要求

图片菜单功能需要安装并启用 `koishi-plugin-puppeteer` 插件：

```bash
npm install koishi-plugin-puppeteer
```

## 默认菜单项

插件包含以下默认菜单项：

- **签到**: 每日签到获取积分
- **一言**: 获取一条随机名言或句子
- **点歌**: 点播指定歌曲
- **域名查询**: 查询域名信息
- **服务器状态**: 查询服务器状态信息

## 开发说明

### 项目结构

```
src/
  index.ts          # 插件主文件
lib/
  index.js          # 编译后的 JavaScript 文件
  index.d.ts        # TypeScript 类型定义
```

### 构建

```bash
npm run build
```

### 发布

```bash
npm publish
```

## 许可证

MIT License

## 贡献

欢迎提交 Issue 和 Pull Request！

## 更新日志

### v1.0.0
- 初始版本发布
- 完整的菜单管理功能
- 图片菜单渲染功能
- 分类和搜索功能
